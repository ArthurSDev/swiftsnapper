{"version":3,"file":"app.js","sourceRoot":"","sources":["../../scripts/backend-connector.ts","../../scripts/cameraManager.ts","../../scripts/index.ts","../../scripts/messageManager.ts","../../scripts/settingsManager.ts","../../scripts/windowManager.ts","../../scripts/SC/snapchat.agent.ts","../../scripts/SC/snapchat.models.ts","../../scripts/SC/snapchat.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nnamespace SwiftSnapper {\r\n    export class Backend {\r\n        constructor() {\r\n            Http.Initialize();\r\n        }\r\n\r\n        public Get(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                Http.Get(options).then((res: Object) => {\r\n                    resolve(res);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n\r\n        public Post(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                Http.Post(options).then((res: Object) => {\r\n                    resolve(res);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n\r\n        public Put(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                Http.Put(options).then((res: Object) => {\r\n                    resolve(res);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n\r\n        public Delete(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                Http.Delete(options).then((res: Object) => {\r\n                    resolve(res);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    module Http {\r\n        let SWIFTSNAPPER_URI = 'https://swiftsnapper.playstr.link/v1/',\r\n            SWIFTSNAPPER_USERAGENT = null;\r\n\r\n        export function Initialize() {\r\n            let device = 'device',\r\n                os = 'os',\r\n                appVersion = 'x.x.x.x';\r\n\r\n            SWIFTSNAPPER_USERAGENT = 'SwiftSnapper/' + appVersion + ' (' + device + ', ' + os + '; gzip)';\r\n\r\n            $.ajaxSetup({\r\n                beforeSend: (xhr) => {\r\n                    if (localStorage.getItem('Authorization') !== null)\r\n                        xhr.setRequestHeader(\"Authorization\", \"Basic \" + localStorage.getItem('Authorization'));\r\n                    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n                }\r\n            });\r\n        }\r\n\r\n        export interface HttpOptions {\r\n            endpoint: string,\r\n            data?: any\r\n        }\r\n\r\n        export function Get(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                $.getJSON(SWIFTSNAPPER_URI + options.endpoint).done((jqXHR, status, data) => {\r\n                    resolve(data);\r\n                }).fail((jqXHR, err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n        export function Post(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                $.post(SWIFTSNAPPER_URI + options.endpoint, options.data, (res) => {\r\n                    resolve(res);\r\n                }, 'json').fail((jqXHR, err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n        export function Put(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                $.ajax({\r\n                    url: options.endpoint,\r\n                    type: 'PUT',\r\n                    contentType: \"application/json\",\r\n                    data: options.data,\r\n                    success: (res) => {\r\n                        resolve(res);\r\n                    },\r\n                    error: (err) => {\r\n                        reject(err);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        export function Delete(options: Http.HttpOptions) {\r\n            return new Promise((resolve, reject) => {\r\n                $.ajax({\r\n                    url: options.endpoint,\r\n                    type: 'DELETE',\r\n                    contentType: \"application/json\",\r\n                    data: options.data,\r\n                    success: (res) => {\r\n                        resolve(res);\r\n                    },\r\n                    error: (err) => {\r\n                        reject(err);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n}","module CameraManager {\r\n    let video,\r\n        mediaStream;\r\n\r\n\r\n\r\n    var Capture = Windows.Media.Capture;\r\n    var DeviceInformation = Windows.Devices.Enumeration.DeviceInformation;\r\n    var DeviceClass = Windows.Devices.Enumeration.DeviceClass;\r\n    var DisplayOrientations = Windows.Graphics.Display.DisplayOrientations;\r\n    var FileProperties = Windows.Storage.FileProperties;\r\n    var Media = Windows.Media;\r\n    var SimpleOrientation = Windows.Devices.Sensors.SimpleOrientation;\r\n    var SimpleOrientationSensor = Windows.Devices.Sensors.SimpleOrientationSensor;\r\n\r\n    // Receive notifications about rotation of the device and UI and apply any necessary rotation to the preview stream and UI controls\r\n    var oOrientationSensor = SimpleOrientationSensor.getDefault(),\r\n        oDisplayInformation = Windows.Graphics.Display['DisplayInformation'].getForCurrentView(),\r\n        oDeviceOrientation = SimpleOrientation.notRotated,\r\n        oDisplayOrientation = DisplayOrientations.portrait;\r\n\r\n\r\n    // Prevent the screen from sleeping while the camera is running\r\n    var oDisplayRequest = new Windows.System.Display.DisplayRequest();\r\n\r\n    // For listening to media property changes\r\n    //var oSystemMediaControls = Media.SystemMediaTransportControls.getForCurrentView();\r\n\r\n    // MediaCapture and its state variables\r\n    var mediaCapture = null,\r\n        isInitialized = false,\r\n        isPreviewing = false,\r\n        isRecording = false;\r\n\r\n    // Information about the camera device\r\n    var externalCamera = false,\r\n        mirroringPreview = false;\r\n    \r\n    // Rotation metadata to apply to the preview stream and recorded videos (MF_MT_VIDEO_ROTATION)\r\n    // Reference: http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868174.aspx\r\n    var RotationKey = \"C380465D-2271-428C-9B83-ECEA3B4A85C1\";\r\n\r\n\r\n    //document.getElementById(\"ShutterBtn\").addEventListener(\"click\", shutterButton_tapped);\r\n\r\n    export function initialize(conf) {\r\n\r\n        video = document.getElementById('CameraPreview');\r\n        var cameraPanelEnumerate = Windows.Devices.Enumeration.Panel.back;\r\n        video.classList.remove('FrontFacing');\r\n        if (conf.frontFacing) {\r\n            cameraPanelEnumerate = Windows.Devices.Enumeration.Panel.front;\r\n            video.classList.add('FrontFacing');\r\n        }\r\n        var Capture = Windows.Media.Capture;\r\n        var mediaSettings = new Capture.MediaCaptureInitializationSettings();\r\n        var rotationValue = Capture.VideoRotation.none;\r\n        //mediaSettings.audioDeviceId = \"\";\r\n        //mediaSettings.videoDeviceId = \"\";\r\n        //mediaSettings.streamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.video;;\r\n        //mediaSettings.photoCaptureSource = Capture.PhotoCaptureSource.photo;\r\n\r\n        // Get available devices for capturing pictures\r\n        findCameraDeviceByPanelAsync(cameraPanelEnumerate)\r\n            .then(function (camera) {\r\n                if (camera === null) {\r\n                    console.log(\"No camera device found!\");\r\n                    return;\r\n                }\r\n                // Figure out where the camera is located\r\n                if (!camera.enclosureLocation || camera.enclosureLocation.panel === Windows.Devices.Enumeration.Panel.unknown) {\r\n                    // No information on the location of the camera, assume it's an external camera, not integrated on the device\r\n                    externalCamera = true;\r\n                    oDisplayOrientation = DisplayOrientations.landscape; \r\n                }\r\n                else {\r\n                    // Camera is fixed on the device\r\n                    externalCamera = false;\r\n\r\n                    // Only mirror the preview if the camera is on the front panel\r\n                    mirroringPreview = (camera.enclosureLocation.panel === Windows.Devices.Enumeration.Panel.front);\r\n                }\r\n                mediaCapture = new Capture.MediaCapture();\r\n\r\n                mediaSettings.videoDeviceId = camera.id;\r\n                mediaSettings.streamingCaptureMode = Capture.StreamingCaptureMode.video;\r\n\r\n                // Initialize media capture and start the preview\r\n                isInitialized = false;\r\n                mediaCapture.initializeAsync(mediaSettings).then(function () {\r\n\r\n                    // Prevent the device from sleeping while the preview is running\r\n                    oDisplayRequest.requestActive();\r\n\r\n                    if (mirroringPreview) {\r\n                        video.style.transform = \"scale(-1, 1)\";\r\n                    }\r\n                    else {\r\n                        video.style.transform = \"scale(1, 1)\";\r\n                    }\r\n\r\n                    var previewUrl = URL.createObjectURL(mediaCapture);\r\n                    video.src = previewUrl;\r\n                    video.play();\r\n\r\n                    video.addEventListener(\"playing\", function () {\r\n                        isPreviewing = true;\r\n                        // Doing a catch loop because often the mediaCapture.setEncodingPropertiesAsync function was still in progress.\r\n                        // I don't know any better way to do this maybe a singleton design pattern?\r\n                        // TODO: get input on this.\r\n                        try {\r\n                            setPreviewRotationAsync();\r\n                        }\r\n                        catch (Error) {\r\n                            console.log(Error.message);\r\n                            console.log(\"Error in setPreviewRotationAsync\");\r\n                        }\r\n\r\n                        /*\r\n                        setPreviewRotationAsync().then(function () {\r\n                            console.log(\"setPreviewRotationAsync completed correctly\");\r\n                        }, function () {\r\n                            console.log(\"Error in setPreviewEotationAsync\");\r\n                        })\r\n                        */\r\n                    });\r\n                },\r\n                    function (error) {\r\n                        console.log(\"Error in mediaCapture.initializeAsync\");\r\n                    })\r\n\r\n            }, function (error) {\r\n                console.log(error.message);\r\n            }\r\n        )\r\n    }\r\n\r\n    export function getExportSettings() {\r\n        var pngProperties = new Windows.Media.MediaProperties.ImageEncodingProperties();\r\n        pngProperties = Windows.Media.MediaProperties.ImageEncodingProperties.createPng();\r\n        return pngProperties\r\n    }\r\n\r\n    function shutterButton_tapped() {\r\n        takePhotoAsync();\r\n    }\r\n\r\n    /// <summary>\r\n    /// Takes a photo to a StorageFile and adds rotation metadata to it\r\n    /// </summary>\r\n    /// <returns></returns>\r\n    export function takePhotoAsync() {\r\n        if (mediaCapture != null) {\r\n\r\n            var Streams = Windows.Storage.Streams;\r\n            var Imaging = Windows.Graphics.Imaging;\r\n            var inputStream = new Streams.InMemoryRandomAccessStream();\r\n            var bitmapDecoder = null,\r\n                bitmapEncoder = null,\r\n                outputStream = null;\r\n\r\n            // Take the picture\r\n            console.log(\"Taking photo...\");\r\n            mediaCapture.capturePhotoToStreamAsync(Windows.Media.MediaProperties.ImageEncodingProperties.createJpeg(), inputStream)\r\n            console.log(\"Photo taken!\");\r\n\r\n            var photoOrientation = convertOrientationToPhotoOrientation(getCameraOrientation());\r\n\r\n            return inputStream\r\n            //return reencodeAndSavePhotoAsync(inputStream, photoOrientation);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /// <summary>\r\n    /// Calculates the current camera orientation from the device orientation by taking into account whether the camera is external or facing the user\r\n    /// </summary>\r\n    /// <returns>The camera orientation in space, with an inverted rotation in the case the camera is mounted on the device and is facing the user</returns>\r\n    function getCameraOrientation() {\r\n        if (externalCamera) {\r\n            // Cameras that are not attached to the device do not rotate along with it, so apply no rotation\r\n            return SimpleOrientation.notRotated;\r\n        }\r\n\r\n        var result = oDeviceOrientation;\r\n\r\n        // Account for the fact that, on portrait-first devices, the camera sensor is mounted at a 90 degree offset to the native orientation\r\n        if (oDisplayInformation.nativeOrientation === DisplayOrientations.portrait) {\r\n            switch (result) {\r\n                case SimpleOrientation.rotated90DegreesCounterclockwise:\r\n                    result = SimpleOrientation.notRotated;\r\n                    break;\r\n                case SimpleOrientation.rotated180DegreesCounterclockwise:\r\n                    result = SimpleOrientation.rotated90DegreesCounterclockwise;\r\n                    break;\r\n                case SimpleOrientation.rotated270DegreesCounterclockwise:\r\n                    result = SimpleOrientation.rotated180DegreesCounterclockwise;\r\n                    break;\r\n                case SimpleOrientation.notRotated:\r\n                default:\r\n                    result = SimpleOrientation.rotated270DegreesCounterclockwise;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        // If the preview is being mirrored for a front-facing camera, then the rotation should be inverted\r\n        if (mirroringPreview) {\r\n            // This only affects the 90 and 270 degree cases, because rotating 0 and 180 degrees is the same clockwise and counter-clockwise\r\n            switch (result) {\r\n                case SimpleOrientation.rotated90DegreesCounterclockwise:\r\n                    return SimpleOrientation.rotated270DegreesCounterclockwise;\r\n                case SimpleOrientation.rotated270DegreesCounterclockwise:\r\n                    return SimpleOrientation.rotated90DegreesCounterclockwise;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /// <summary>\r\n    /// Applies the given orientation to a photo stream and saves it as a StorageFile\r\n    /// </summary>\r\n    /// <param name=\"stream\">The photo stream</param>\r\n    /// <param name=\"photoOrientation\">The orientation metadata to apply to the photo</param>\r\n    /// <returns></returns>\r\n    function reencodeAndSavePhotoAsync(inputStream, orientation) {\r\n        var Imaging = Windows.Graphics.Imaging;\r\n        var bitmapDecoder = null,\r\n            bitmapEncoder = null,\r\n            outputStream = null;\r\n\r\n        return Imaging.BitmapDecoder.createAsync(inputStream)\r\n            .then(function (decoder) {\r\n                bitmapDecoder = decoder;\r\n                return Windows.Storage.KnownFolders.picturesLibrary.createFileAsync(\"SimplePhoto.jpg\", Windows.Storage.CreationCollisionOption.generateUniqueName);\r\n            }).then(function (file) {\r\n                return file.openAsync(Windows.Storage.FileAccessMode.readWrite);\r\n            }).then(function (outStream) {\r\n                outputStream = outStream;\r\n                return Imaging.BitmapEncoder.createForTranscodingAsync(outputStream, bitmapDecoder);\r\n            }).then(function (encoder) {\r\n                bitmapEncoder = encoder;\r\n                var properties = new Imaging.BitmapPropertySet();\r\n                properties.insert(\"System.Photo.Orientation\", new Imaging.BitmapTypedValue(orientation, Windows.Foundation.PropertyType.uInt16));\r\n                return bitmapEncoder.bitmapProperties.setPropertiesAsync(properties)\r\n            }).then(function () {\r\n                return bitmapEncoder.flushAsync();\r\n            }).then(function () {\r\n                inputStream.close();\r\n                outputStream.close();\r\n            });\r\n    }\r\n\r\n    /// <summary>\r\n    /// Attempts to find and return a device mounted on the panel specified, and on failure to find one it will return the first device listed\r\n    /// </summary>\r\n    /// <param name=\"panel\">The desired panel on which the returned device should be mounted, if available</param>\r\n    /// <returns></returns>\r\n    function findCameraDeviceByPanelAsync(panel) {\r\n        var deviceInfo = null;\r\n        // Get available devices for capturing pictures\r\n        return DeviceInformation.findAllAsync(DeviceClass.videoCapture)\r\n            .then(function (devices) {\r\n                devices.forEach(function (cameraDeviceInfo) {\r\n                    if (cameraDeviceInfo.enclosureLocation != null && cameraDeviceInfo.enclosureLocation.panel === panel) {\r\n                        deviceInfo = cameraDeviceInfo;\r\n                        return;\r\n                    }\r\n                });\r\n\r\n                // Nothing matched, just return the first\r\n                if (!deviceInfo && devices.length > 0) {\r\n                    deviceInfo = devices.getAt(0);\r\n                }\r\n\r\n                return deviceInfo;\r\n            });\r\n    }\r\n\r\n    /// <summary>\r\n    /// Converts the given orientation of the app on the screen to the corresponding rotation in degrees\r\n    /// </summary>\r\n    /// <param name=\"orientation\">The orientation of the app on the screen</param>\r\n    /// <returns>An orientation in degrees</returns>\r\n    function convertDisplayOrientationToDegrees(orientation) {\r\n        switch (orientation) {\r\n            case DisplayOrientations.portrait:\r\n                return 90;\r\n            case DisplayOrientations.landscapeFlipped:\r\n                return 180;\r\n            case DisplayOrientations.portraitFlipped:\r\n                return 270;\r\n            case DisplayOrientations.landscape:\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    /// <summary>\r\n    /// Gets the current orientation of the UI in relation to the device (when AutoRotationPreferences cannot be honored) and applies a corrective rotation to the preview\r\n    /// </summary>\r\n    /// <returns></returns>\r\n    function setPreviewRotationAsync() {\r\n        //Edge case for Windows on PCs\r\n        if (!(navigator.userAgent.indexOf('Phone') > -1)) {\r\n            return;\r\n        }\r\n\r\n        // Calculate which way and how far to rotate the preview\r\n        var rotationDegrees = convertDisplayOrientationToDegrees(oDisplayOrientation);\r\n\r\n        // The rotation direction needs to be inverted if the preview is being mirrored\r\n        if (mirroringPreview) {\r\n            rotationDegrees = (360 - rotationDegrees) % 360;\r\n        }\r\n\r\n        // Add rotation metadata to the preview stream to make sure the aspect ratio / dimensions match when rendering and getting preview frames\r\n        var props = mediaCapture.videoDeviceController.getMediaStreamProperties(Capture.MediaStreamType.videoPreview);\r\n        props.properties.insert(RotationKey, rotationDegrees);\r\n        return mediaCapture.setEncodingPropertiesAsync(Capture.MediaStreamType.videoPreview, props, null);\r\n    }\r\n\r\n\r\n    /// <summary>\r\n    /// Converts the given orientation of the device in space to the metadata that can be added to captured photos\r\n    /// </summary>\r\n    /// <param name=\"orientation\">The orientation of the device in space</param>\r\n    /// <returns></returns>\r\n    function convertOrientationToPhotoOrientation(orientation) {\r\n        switch (orientation) {\r\n            case SimpleOrientation.rotated90DegreesCounterclockwise:\r\n                return FileProperties.PhotoOrientation.rotate90;\r\n            case SimpleOrientation.rotated180DegreesCounterclockwise:\r\n                return FileProperties.PhotoOrientation.rotate180;\r\n            case SimpleOrientation.rotated270DegreesCounterclockwise:\r\n                return FileProperties.PhotoOrientation.rotate270;\r\n            case SimpleOrientation.notRotated:\r\n            default:\r\n                return FileProperties.PhotoOrientation.normal;\r\n        }\r\n    }\r\n}","'use strict';\r\n\r\n///FIXME: ES6 Import\r\n//import * as snapchat from './SC/snapchat';\r\n\r\n/// <reference path='typings/cordova/plugins/Device.d.ts' />\r\n/// <reference path='typings/winrt/winrt.d.ts' />\r\n/// <reference path='typings/jquery/jquery.d.ts' />\r\n/// <reference path='typings/es6-promise/es6-promise.d.ts' />\r\n/// <reference path='SC/snapchat.ts' />\r\n/// <reference path='cameraManager.ts' />\r\n/// <reference path='messageManager.ts' />\r\n/// <reference path='windowManager.ts' />\r\n\r\ndeclare let Handlebars: any;\r\nlet views;\r\n\r\nmodule SwiftSnapper {\r\n    let SnapchatClient: Snapchat.Client,\r\n        currentItem = null,\r\n        SystemNavigator = null;\r\n    const language = Windows.System.UserProfile.GlobalizationPreferences.languages[0];\r\n\r\n    export module Application {\r\n        export function initialize() {\r\n            document.addEventListener('deviceready', onDeviceReady, false);\r\n            MessageManager.initialize();\r\n            WindowManager.initialize();\r\n\r\n            if (!SwiftSnapper.Settings.Get('ApiEndpoint'))\r\n                SwiftSnapper.Settings.Set('ApiEndpoint', 'https://app.snapchat.com');\r\n        }\r\n\r\n        export function getLanguageStrings(lang: string, callback: Function) {\r\n            $.getJSON('lang/' + lang + '.json', function (lang) {\r\n                callback(lang);\r\n            }, function (e) {\r\n                //Error\r\n                $.getJSON('lang/en-US.json', function (lang) {\r\n                    callback(lang);\r\n                });\r\n            }).fail(function () {\r\n                $.getJSON('lang/en-US.json', function (lang) {\r\n                    callback(lang);\r\n                });\r\n            });\r\n        }\r\n\r\n        function onDeviceReady() {\r\n            // Handle the Cordova pause and resume events\r\n            document.addEventListener('pause', onPause, false);\r\n            document.addEventListener('resume', onResume, false);\r\n            SystemNavigator = Windows.UI.Core['SystemNavigationManager'].getForCurrentView();\r\n            SystemNavigator.addEventListener('backrequested', toCenterView);\r\n        }\r\n\r\n        function onPause() {\r\n            // TODO: This application has been suspended. Save application state here.\r\n        }\r\n\r\n        function onResume() {\r\n\r\n        }\r\n    }\r\n\r\n    window.onload = function () {\r\n        Application.initialize();\r\n        let connectionProfile = Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();\r\n        if (connectionProfile != null && connectionProfile.getNetworkConnectivityLevel() == Windows.Networking.Connectivity.NetworkConnectivityLevel.internetAccess) {\r\n            SnapchatClient = new Snapchat.Client();\r\n            SnapchatClient.Initialize().then(function () {\r\n                $(document).ready(function () {\r\n                    $('body').load('views/account/index.html');\r\n                });\r\n            }).catch((err) => {\r\n                MessageManager.alert('Error: ' + err, 'Error!', null);\r\n                $(document).ready(function () {\r\n                    $('body').load('views/account/index.html');\r\n                });\r\n            });\r\n        } else {\r\n            MessageManager.alert('Please connect to the internet and start the app again', 'No internet connection', function () {\r\n                window.close();\r\n            });\r\n        }\r\n    };\r\n\r\n    export function onAccountView() {\r\n        Application.getLanguageStrings(language, function (lang) {\r\n            let template = Handlebars.compile($('#template').html());\r\n            $('#PageContent').html(template(lang));\r\n            //Init Owl Carousel\r\n            views = $('#views');\r\n            views.owlCarousel({\r\n                loop: false,\r\n                nav: false,\r\n                dots: false,\r\n                video: true,\r\n                margin: 0,\r\n                startPosition: 1,\r\n                mouseDrag: false,\r\n                touchDrag: false,\r\n                pullDrag: false,\r\n                fallbackEasing: 'easeInOutQuart',\r\n                items: 1,\r\n            });\r\n\r\n            views.on('initialized.owl.carousel changed.owl.carousel', function (event) {\r\n                currentItem = event.item.index;\r\n            });\r\n\r\n            $('header').on('click tap', function () {\r\n                views.trigger('to.owl.carousel', [1, 300, true]);\r\n            });\r\n            $('#LogInBtn').on('click tap', function () {\r\n                views.trigger('next.owl.carousel', [300]);\r\n            });\r\n            $('#SignUpBtn').on('click tap', function () {\r\n                views.trigger('prev.owl.carousel', [300]);\r\n            });\r\n\r\n            $('#LogInForm').submit(function (e) {\r\n                e.preventDefault();\r\n                let credential = new Windows.Security.Credentials.PasswordCredential('SwiftSnapper', $('#LogInView form .username').val(), $('#LogInView form .password').val());\r\n                logIn(credential, lang);\r\n            });\r\n\r\n            $(function () {\r\n                let vault = new Windows.Security.Credentials.PasswordVault();\r\n                let credentialList = vault.retrieveAll();\r\n                if (credentialList.length > 0) {\r\n                    let credential = vault.retrieve('SwiftSnapper', credentialList[0].userName);\r\n                    logIn(credential, lang);\r\n                }\r\n            });\r\n        });\r\n\r\n        function logIn(credential, lang) {\r\n            WindowManager.startLoading(lang.views.account.logInView.loggingIn);\r\n            $('#LogInView form .username').prop('disabled', true);\r\n            $('#LogInView form .password').prop('disabled', true);\r\n\r\n            SnapchatClient.Login({\r\n                username: credential.userName,\r\n                password: credential.password,\r\n            }).then((data) => {\r\n                let vault = new Windows.Security.Credentials.PasswordVault();\r\n\r\n                if (typeof data['status'] !== 'undefined' && data['status'] !== 200) {\r\n                    if (vault.retrieveAll().length > 0) {\r\n                        vault.remove(credential);\r\n                    }\r\n\r\n                    MessageManager.alert(lang.views.account.logInView.wrongUsernameOrPassword, lang.views.account.logInView.failedToLogIn);\r\n\r\n                    WindowManager.stopLoading();\r\n                    $('#LogInView form .username').prop('disabled', false);\r\n                    $('#LogInView form .password').prop('disabled', false);\r\n                    return -1;\r\n                }\r\n\r\n                if (vault.retrieveAll().length == 0) {\r\n                    vault.add(credential);\r\n                }\r\n\r\n                WindowManager.stopLoading();\r\n                WindowManager.hideStatusBar();\r\n                $('body').load('views/overview/index.html');\r\n            }).catch((err) => {\r\n                WindowManager.stopLoading();\r\n                WindowManager.hideStatusBar();\r\n\r\n                MessageManager.alert(err, 'Error');\r\n\r\n                console.log(err);\r\n                if (err == 'API Key is Invalid.')\r\n                    $('body').load('views/settings/index.html');\r\n                else\r\n                    $('body').load('views/overview/index.html');\r\n            });\r\n        }\r\n    }\r\n\r\n    export function onOverviewView() {\r\n        Application.getLanguageStrings(language, function (lang) {\r\n            let template = Handlebars.compile($('#template').html());\r\n            $('#PageContent').html(template(lang));\r\n\r\n            //Init Owl Carousel\r\n            views = $('#views');\r\n            views.owlCarousel({\r\n                loop: false,\r\n                nav: false,\r\n                dots: false,\r\n                video: true,\r\n                margin: 0,\r\n                startPosition: 1,\r\n                pullDrag: false,\r\n                fallbackEasing: 'easeInOutQuart',\r\n                responsive: {\r\n                    0: {\r\n                        items: 1\r\n                    },\r\n                    1024: {\r\n                        items: 3\r\n                    }\r\n                }\r\n            });\r\n\r\n            views.on('initialized.owl.carousel changed.owl.carousel', function (event) {\r\n                let pos = event.item.index;\r\n                currentItem = pos;\r\n                if (pos == 1) {\r\n                    WindowManager.hideStatusBar();\r\n                } else\r\n                    WindowManager.showStatusBar();\r\n            });\r\n\r\n            CameraManager.initialize({\r\n                'frontFacing': false\r\n            });\r\n\r\n            let snaps;\r\n            try {\r\n                snaps = SnapchatClient.GetPendingFeed();\r\n                for (let n = 0; n < snaps.length; n++) {\r\n                    let snap = snaps[n],\r\n                        output =\r\n                            '<article class=\"item\" id=\" + n + \"><div class=\"notify snap\"><span class=\";icon mdl2-checkbox-fill\"></span></div><div class=\"details\">' +\r\n                            '<div class=\"header\">' + snap.sender + '</div>' +\r\n                            '<div class=\"details\">Length: ' + snap.timer.toString() + '</div>' +\r\n                            '</div></article>';\r\n\r\n                    $('#SnapsView .SnapsList').append(output);\r\n                }\r\n\r\n                if (snaps.length < 1)\r\n                    throw ('no snaps');\r\n            } catch (e) {\r\n                $('#SnapsView .SnapsList').append('<p class=\"note\">' + lang.views.overview.emptyFeed + '</p>');\r\n            }\r\n\r\n            //Temp for showing snaps\r\n            $('#SnapsView .SnapsList article').on('click tap', (e) => {\r\n                let snap = snaps[$(e.currentTarget).attr('id')];\r\n                SnapchatClient.GetSnapMedia(snap).then(function (img: string) {\r\n                    $('#ShowSnapView').css('display', 'block');\r\n                    $('#ShowSnapView img').attr('src', 'data:image/jpeg;base64,' + btoa(img));\r\n                });\r\n            });\r\n            $('#ShowSnapView').on('click tap', () => {\r\n                $('#ShowSnapView').css('display', 'none');\r\n            });\r\n\r\n            $('#ViewSnapsBtn').on('click tap', () => {\r\n                views.trigger('prev.owl.carousel', [300]);\r\n            });\r\n            $('#ViewStoriesBtn').on('click tap', () => {\r\n                views.trigger('next.owl.carousel', [300]);\r\n            });\r\n\r\n            $('#CameraToggleBtn').on('click tap', () => {\r\n                $('#CameraPreview').toggleClass('FrontFacing');\r\n\r\n                if ($('#CameraPreview').hasClass('FrontFacing')) {\r\n                    CameraManager.initialize({\r\n                        frontFacing: true\r\n                    });\r\n                } else {\r\n                    CameraManager.initialize({\r\n                        frontFacing: false\r\n                    });\r\n                  }\r\n                }\r\n            );\r\n            $('#ShutterBtn').on('click tap', () => {\r\n                let IStream = CameraManager.takePhotoAsync();\r\n                console.log('Picture Taken');\r\n                if (IStream != null) {\r\n                    MessageManager.alert('Picture Taken!', 'Success', null);\r\n                    // Send to SnapChat or editor view or something.\r\n                    // SnapchatClient.PostSnap(IStream, [['paraName1', 'Val'], ['paraName2', 'Val']], {});\r\n                }\r\n                else {\r\n                    MessageManager.alert('No Camera!', 'Failure', null);\r\n                }\r\n            });\r\n            $('#SettingsBtn').on('click tap', () => {\r\n                $('body').load('views/settings/index.html');\r\n            });\r\n\r\n\r\n            if (typeof Windows !== 'undefined' && Windows.Foundation.Metadata['ApiInformation'].isTypePresent('Windows.Phone.UI.Input.HardwareButtons')) {\r\n                Windows['Phone'].UI.Input.HardwareButtons.addEventListener('camerapressed', function (e) {\r\n                    $('#ShutterBtn').click();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    export function onSettingsView() {\r\n        Application.getLanguageStrings(language, function (lang) {\r\n            let template = Handlebars.compile($('#template').html());\r\n            $('#PageContent').html(template(lang));\r\n\r\n            $('#LogoutBtn').on('click tap', function () {\r\n                MessageManager.alert('Cleared all credentials!', 'Cleared Credentials', null);\r\n                let vault = new Windows.Security.Credentials.PasswordVault();\r\n                let creds = vault.retrieveAll();\r\n                for (let i = 0; i < creds.length; ++i) {\r\n                    vault.remove(creds[i]);\r\n                }\r\n\r\n                $('body').load('views/account/index.html');\r\n            });\r\n            $('#BackBtn').on('click tap', function () {\r\n                $('body').load('views/overview/index.html');\r\n            });\r\n\r\n            //Handle API Token\r\n            let ApiToken = Settings.Get('ApiToken');\r\n            if (ApiToken)\r\n                $('#TextBoxApiToken').val(ApiToken);\r\n            $('#TextBoxApiToken').on('change', function (e) {\r\n                Settings.Set('ApiToken', $('#TextBoxApiToken').val());\r\n            });\r\n\r\n            //Handle API Secret\r\n            let ApiSecret = Settings.Get('ApiSecret');\r\n            if (ApiSecret)\r\n                $('#TextBoxApiSecret').val(ApiSecret);\r\n            $('#TextBoxApiSecret').on('change', function (e) {\r\n                Settings.Set('ApiSecret', $('#TextBoxApiSecret').val());\r\n            });\r\n\r\n            //Handle API Endpoint\r\n            let ApiEndpoint = Settings.Get('ApiEndpoint');\r\n            if (ApiEndpoint)\r\n                $('#TextBoxApiEndpoint').val(ApiEndpoint);\r\n            $('#TextBoxApiEndpoint').on('change', function (e) {\r\n                Settings.Set('ApiEndpoint', $('#TextBoxApiEndpoint').val());\r\n            });\r\n        });\r\n    }\r\n\r\n    function toCenterView(eventArgs) {\r\n        SystemNavigator.AppViewBackButtonVisibility = Windows.UI.Core['AppViewBackButtonVisibility'].collapsed;\r\n        console.log(currentItem);\r\n        if (currentItem != 1) {\r\n            views.trigger('to.owl.carousel', [1, 300, true]);\r\n            eventArgs.handled = true;\r\n        };\r\n    }\r\n}\r\n","module MessageManager {\r\n    let popup;\r\n\r\n    export function initialize() {\r\n        popup = Windows.UI.Popups;\r\n    }\r\n\r\n    export function alert(message: string, title: string, callback?) {\r\n        let alert = new popup.MessageDialog(message, title);\r\n        alert.commands.append(new popup.UICommand(\"OK\", function (cmd) {\r\n\r\n            if(callback)\r\n                callback();\r\n        }));\r\n        alert.defaultCommandIndex = 1;\r\n        alert.showAsync();\r\n    }\r\n\r\n    export function alertWithOptions(message: string, title: string, commands: Array<string>, index: number, callback: Function) {\r\n        let alert = new popup.MessageDialog(message, title),\r\n            cb = function (cmd) {\r\n                callback(cmd.label);\r\n            };\r\n\r\n        for (let n; n < commands.length; n++) {\r\n            alert.commands.append(new popup.UICommand(commands[n], cb));\r\n        }\r\n        \r\n        alert.defaultCommandIndex = index;\r\n        alert.showAsync();\r\n    }\r\n}","module SwiftSnapper {\r\n    export module Settings {\r\n        export function Get(item) {\r\n            return localStorage.getItem('_s_' + item);\r\n        }\r\n        export function Set(item, data) {\r\n            localStorage.setItem('_s_' + item, data);\r\n        }\r\n    }\r\n}","module SwiftSnapper {\r\n    export module WindowManager {\r\n        let view = null,\r\n            pi = null,\r\n            theme = {\r\n                a: 255,\r\n                r: 52,\r\n                g: 152,\r\n                b: 219\r\n            };\r\n\r\n        export function initialize() {\r\n            view = Windows.UI.ViewManagement.ApplicationView.getForCurrentView();\r\n            view.titleBar.inactiveBackgroundColor = theme;\r\n            view.titleBar.buttonInactiveBackgroundColor = theme;\r\n            view.titleBar.backgroundColor = theme;\r\n            view.titleBar.buttonBackgroundColor = theme;\r\n            view['setDesiredBoundsMode'](Windows.UI.ViewManagement['ApplicationViewBoundsMode'].useCoreWindow);\r\n            view['setPreferredMinSize']({\r\n                height: 1024,\r\n                width: 325\r\n            });\r\n\r\n            if (typeof Windows.UI.ViewManagement['StatusBar'] !== 'undefined') {\r\n                $('body').addClass('mobile'); //TODO: Move to initialize()\r\n                let statusBar = Windows.UI.ViewManagement['StatusBar'].getForCurrentView();\r\n                statusBar.showAsync();\r\n                statusBar.backgroundOpacity = 0;\r\n                statusBar.backgroundColor = Windows.UI.ColorHelper.fromArgb(255, 52, 152, 219);\r\n                statusBar.foregroundColor = Windows.UI.Colors.white;\r\n\r\n                //Lock portrait\r\n                Windows.Graphics.Display['DisplayInformation'].autoRotationPreferences = Windows.Graphics.Display.DisplayOrientations.portrait\r\n            }\r\n        }\r\n\r\n        export function showStatusBar() {\r\n            if (typeof Windows.UI.ViewManagement['StatusBar'] !== 'undefined') {\r\n                let statusBar = Windows.UI.ViewManagement['StatusBar'].getForCurrentView();\r\n                statusBar.showAsync();\r\n            }\r\n        }\r\n\r\n        export function hideStatusBar() {\r\n            if (typeof Windows.UI.ViewManagement['StatusBar'] !== 'undefined') {\r\n                let statusBar = Windows.UI.ViewManagement['StatusBar'].getForCurrentView();\r\n                statusBar.hideAsync();\r\n            }\r\n        }\r\n\r\n        export function startLoading(message) {\r\n            if (typeof Windows.UI.ViewManagement['StatusBar'] !== 'undefined') {\r\n                pi = Windows.UI.ViewManagement['StatusBar'].getForCurrentView().progressIndicator;\r\n                pi.text = message;\r\n                pi.progressValue = null;\r\n                pi.showAsync();\r\n            }\r\n        }\r\n        export function stopLoading() {\r\n            if (typeof Windows.UI.ViewManagement['StatusBar'] !== 'undefined' && pi !== null) {\r\n                pi.hideAsync();\r\n            }\r\n        }\r\n    }\r\n}","declare var Hashes: any;\r\nvar sha256 = new Hashes.SHA256\r\n\r\nnamespace Snapchat {\r\n    export class Agent{\r\n        public SNAPCHAT_BASE_ENDPOINT = null;\r\n        public SNAPCHAT_EVENTS_ENDPOINT = 'https://sc-analytics.appspot.com/post_events';\r\n        public SNAPCHAT_ANALYTICS_ENDPOINT = 'https://sc-analytics.appspot.com/analytics/b';\r\n        public SNAPCHAT_HASH_PATTERN = '0001110111101110001111010101111011010001001110011000110001000110';\r\n        public SNAPCHAT_API_SECRET = 'iEk21fuwZApXlz93750dmW22pw389dPwOk';\r\n        public SNAPCHAT_API_STATIC_TOKEN = 'm198sOkJEn37DjqZ32lpRu76xmw288xSQ9';\r\n        public SNAPCHAT_CLIENT_AUTH_TOKEN = null; //TODO\r\n        public SNAPCHAT_CLIENT_TOKEN = null; //TODO\r\n        public SNAPCHAT_AUTH_TOKEN = null;\r\n        public SNAPCHAT_UUID = null; //TODO\r\n        public SNAPCHAT_USER_AGENT = null;\r\n        public SNAPCHAT_VERSION = '9.18.2.0';\r\n\r\n        public CASPER_USER_AGENT = 'SwiftSnapper/1.0.0.0 (SwiftSnapper; Windows 10; gzip)';\r\n        public CASPER_ENDPOINT = 'https://casper-api.herokuapp.com';\r\n        public CASPER_API_TOKEN = '';\r\n        public CASPER_API_SECRET = '';\r\n\r\n        private CURRENT_USER_REFERENCE: Snapchat.User;\r\n\r\n        public Initialize(cur) {\r\n            this.CURRENT_USER_REFERENCE = cur;\r\n            this.CASPER_API_TOKEN = SwiftSnapper.Settings.Get('ApiToken');\r\n            this.CASPER_API_SECRET = SwiftSnapper.Settings.Get('ApiSecret');\r\n            this.SNAPCHAT_BASE_ENDPOINT = SwiftSnapper.Settings.Get('ApiEndpoint');\r\n\r\n            return new Promise((resolve, reject) => {\r\n                this.InitializeCasper().then(function () {\r\n                    resolve(this);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n\r\n        /*\r\n            Generates a UNIX timestamp\r\n        */\r\n        public GenerateTimeStamp() {\r\n            return Math.round((new Date).getTime());\r\n        }\r\n\r\n        /*\r\n            Generates a JWT token\r\n        */\r\n        public GenerateJwtToken(timestamp, parameteters) {\r\n            let header = {\r\n                alg: 'HS256'\r\n            };\r\n\r\n            if (!parameteters)\r\n                parameteters = {};\r\n            parameteters['iat'] = timestamp;\r\n\r\n            var payload = btoa(JSON.stringify(header)) + '.' + btoa(JSON.stringify(parameteters));\r\n            var signature = sha256.b64_hmac('secretkey', payload).slice(0, -1).replace(/\\+/g, '-').replace(/\\//g, '_');\r\n            var jwt = payload + '.' + signature;\r\n            return jwt;\r\n        }\r\n\r\n        /*\r\n            Generates req_token\r\n            based on https://github.com/cuonic/SnapchatDevWiki/wiki/Generating-the-req_token\r\n        */\r\n        public GenerateRequestToken(token, timestamp) {\r\n            let hash1: string = sha256.hex(this.SNAPCHAT_API_SECRET + token);\r\n            let hash2: string = sha256.hex(timestamp.toString() + this.SNAPCHAT_API_SECRET);\r\n\r\n            let res = '';\r\n            for (var n = 0; n < this.SNAPCHAT_HASH_PATTERN.length; n++) {\r\n                if (parseInt(this.SNAPCHAT_HASH_PATTERN.substr(n, 1))) {\r\n                    res += hash2[n];\r\n                } else {\r\n                    res += hash1[n];\r\n                }\r\n            }\r\n            return res;\r\n        }\r\n\r\n        /*\r\n\t        Post request to Snapchat's API\r\n            TODO: Cache\r\n        */\r\n        public PostSnapchat(endpoint, parameters): Promise<string> {\r\n            let timestamp = this.GenerateTimeStamp();\r\n\r\n            return new Promise((resolve, reject) => {\r\n                if (!endpoint)\r\n                    reject({\r\n                        message: 'Endpoint requiered',\r\n                        code: -1\r\n                    });\r\n                \r\n                return this.PostCasper('/snapchat/ios/endpointauth', {\r\n                    'jwt': this.GenerateJwtToken(timestamp, {\r\n                        'username': this.CURRENT_USER_REFERENCE.username,\r\n                        'auth_token': this.SNAPCHAT_AUTH_TOKEN,\r\n                        'endpoint': endpoint\r\n                    }),\r\n\r\n                }).then((res: CasperResponse) => {\r\n                    if (res.code !== 200)\r\n                        return reject(res);\r\n\r\n                    let endpoint = res.endpoints[0];\r\n\r\n                    let URI = new Windows.Foundation.Uri(this.SNAPCHAT_BASE_ENDPOINT + endpoint.endpoint);\r\n                    let REQ = Windows.Web['Http'].HttpStringContent(this.ParametersToURI(endpoint.params.concat(parameters)), Windows.Storage.Streams.UnicodeEncoding.utf8, 'application/x-www-form-urlencoded'),\r\n                        HTTP = new Windows.Web['Http'].HttpClient(),\r\n                        HEAD = HTTP.defaultRequestHeaders;\r\n\r\n                    HEAD = Snapchat.Http.ConfigureHeaders(HEAD, endpoint.headers);\r\n                    let promise = HTTP.postAsync(URI, REQ).done((res) => {\r\n                        res.content.readAsStringAsync().done((e) => {\r\n                            return resolve(JSON.parse(e));\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        }\r\n\r\n        /*\r\n            Casper Related functions.\r\n            TODO: move to snapchat.casper.agent.ts\r\n            ==================================================\r\n        */\r\n\r\n        /*\r\n\t        Initialize Casper for use\r\n        */\r\n        private InitializeCasper() {\r\n            return new Promise((resolve, reject) => {\r\n                resolve();\r\n            });\r\n        }\r\n\r\n        /*\r\n\t        Post request to Casper.io's API\r\n        */\r\n        public PostCasper(URI, parameters, headers?): Promise<any> {\r\n            //TODO: Check cache\r\n            if (!headers) {\r\n                headers = {};\r\n            }\r\n\r\n            if (!parameters) {\r\n                parameters = {};\r\n            }\r\n\r\n            if (URI == null || parameters == null)\r\n                return null;\r\n            URI = new Windows.Foundation.Uri(this.CASPER_ENDPOINT + URI);\r\n\r\n            let REQ = Windows.Web['Http'].HttpStringContent(this.ParametersToURI(parameters), Windows.Storage.Streams.UnicodeEncoding.utf8, 'application/x-www-form-urlencoded'),\r\n                HTTP = new Windows.Web['Http'].HttpClient(),\r\n                HEAD = HTTP.defaultRequestHeaders;\r\n\r\n            HEAD = Snapchat.Http.ConfigureHeaders(HEAD, headers);\r\n            HEAD.append('X-Casper-API-Key', this.CASPER_API_TOKEN);\r\n\r\n            return new Promise((resolve, reject) => {\r\n                let promise = HTTP.postAsync(URI, REQ).done((res) => {\r\n                    res.content.readAsStringAsync().done((res) => {\r\n                        //TODO: Cache response\r\n                        resolve(JSON.parse(res))\r\n                    });\r\n                    //Handle reject\r\n                });\r\n            });\r\n        }\r\n\r\n        public LoginSnapchatCasper(timestamp) {\r\n            var self = this;\r\n                return new Promise((resolve, reject) => {\r\n                    let headers = {\r\n                        'Connection': 'Keep-Alive',\r\n                        'Accept-Encoding': 'gzip',\r\n                        'User-Agent': this.CASPER_USER_AGENT\r\n                    };\r\n                    this.PostCasper('/snapchat/ios/login', {\r\n                        'jwt': this.GenerateJwtToken(timestamp, {\r\n                            'username': this.CURRENT_USER_REFERENCE.username,\r\n                            'password': this.CURRENT_USER_REFERENCE.password\r\n                        }),\r\n\r\n                    }, headers).then((res) => {\r\n                        console.log(res);\r\n\r\n                        if (res.code !== 200)\r\n                            return reject(res);\r\n\r\n                        //TODO: Model\r\n\r\n                        resolve(this);\r\n                    });\r\n                });\r\n        }\r\n\r\n        public EndpointAuthCasper(endpoint, timestamp) {\r\n            var self = this;\r\n            return new Promise((resolve, reject) => {\r\n                let headers = {\r\n                    'Connection': 'Keep-Alive',\r\n                    'Accept-Encoding': 'gzip',\r\n                    'User-Agent': this.CASPER_USER_AGENT\r\n                };\r\n                this.PostCasper(endpoint, {\r\n                    'jwt': this.GenerateJwtToken(timestamp, {\r\n                        'username': this.CURRENT_USER_REFERENCE.username,\r\n                        'password': this.CURRENT_USER_REFERENCE.password\r\n                    }),\r\n\r\n                }, headers).then((res) => {\r\n                    console.log(res);\r\n\r\n                    if (res.code !== 200)\r\n                        return reject(res);\r\n\r\n                    //TODO: Model\r\n\r\n                    resolve(this);\r\n                });\r\n            });\r\n        }\r\n\r\n        /*\r\n\t        Converts parameters to URI\r\n        */\r\n        public ParametersToURI(parameters: Object) {\r\n            var res = '';\r\n            for (var index in parameters) {\r\n                if (parameters.hasOwnProperty(index)) {\r\n\r\n                    var parameter = parameters[index];\r\n                    if (res != '') {\r\n                        res += '&';\r\n                    }\r\n                    res += index + '=' + parameter;\r\n                }\r\n            }\r\n            return res;\r\n        }\r\n    }\r\n\r\n    export module Http {\r\n        export function ConfigureHeaders(HEAD, headers) {\r\n            \r\n            for (var index in headers) {\r\n                if (headers.hasOwnProperty(index)) {\r\n                    var header = headers[index];\r\n\r\n                    if (index === 'Accept-Encoding') {\r\n                        HEAD.acceptEncoding.clear();\r\n                        HEAD.acceptEncoding.parseAdd(header);\r\n                    }\r\n\r\n                    if (index === 'Accept')\r\n                        HEAD.accept.parseAdd(headers.Accept);\r\n\r\n                    if (index === 'Accept-Language')\r\n                        HEAD.acceptLanguage.parseAdd(header);\r\n\r\n                    if (index === 'Accept-Locale')\r\n                        HEAD.append('Accept-Locale', header);\r\n\r\n                    if (index === 'Connection')\r\n                        HEAD.connection.parseAdd(header);\r\n\r\n                    if (index === 'Cache-Control')\r\n                        HEAD.cacheControl.parseAdd(header);\r\n\r\n                    if (index === 'User-Agent')\r\n                        HEAD.userAgent.parseAdd(header);\r\n\r\n                    else\r\n                        HEAD.append(index, headers[index]);\r\n                }\r\n            }\r\n            \r\n\r\n            return HEAD;\r\n        }\r\n    }\r\n}","namespace Snapchat {\r\n    export class User {\r\n        public username: string;\r\n\r\n        //Only used by current user\r\n        public password: string;\r\n        public google_username: string;\r\n        public google_password: string;\r\n    }\r\n\r\n    export class Snap {\r\n        public conversationId: string;\r\n        public id: string;\r\n        public mediaType: string;\r\n        public sender: string;\r\n        public recipient: string;\r\n        public mediaState: string;\r\n        public timer: Number = 0;\r\n        public timestamp: number = 0;\r\n    }\r\n\r\n    export interface LoginDetails {\r\n        username: string,\r\n        password: string,\r\n    }\r\n    export interface RegisterDetails {\r\n        username: string,\r\n        password: string,\r\n        email: string,\r\n        cellphoneNumber: number,\r\n    }\r\n\r\n    export interface CasperResponse {\r\n        code: number,\r\n        endpoints: [{\r\n            endpoint: string,\r\n            cache_millis: number,\r\n            headers: any,\r\n            params: any\r\n        }],\r\n        settings: any\r\n    }\r\n}","/// <reference path=\"snapchat.agent.ts\" />\r\n/// <reference path=\"snapchat.models.ts\" />\r\n\r\nnamespace Snapchat {\r\n    export class Client {\r\n        private SnapchatAgent: Snapchat.Agent;\r\n\r\n        public AllUpdatesData;\r\n        public CurrentUser: Snapchat.User;\r\n\r\n        public Initialize() {\r\n            this.SnapchatAgent = new Snapchat.Agent();\r\n            this.CurrentUser = new Snapchat.User();\r\n            console.log(this.CurrentUser);\r\n\r\n            return new Promise((resolve, reject) => {\r\n                this.SnapchatAgent.Initialize(this.CurrentUser).then(() => {\r\n                    resolve(this);\r\n                }).catch((err) => {\r\n                    reject(err);\r\n                });\r\n            });\r\n        }\r\n\r\n        /*\r\n            Get the current user's pending Snapchat feed\r\n        */\r\n        public GetPendingFeed(): Array<Snapchat.Snap> {\r\n            return null;\r\n        }\r\n\r\n        /*\r\n            Get the media for the provided snap\r\n        */\r\n        public GetSnapMedia(snap: Snapchat.Snap) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve();\r\n            });\r\n        }\r\n\r\n        /*\r\n            Get user's SnapTag\r\n        */\r\n        public GetSnapTag(username: string) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve();\r\n            });\r\n        }\r\n\r\n        public PostSnap(URI, parameters) {\r\n            return this.SnapchatAgent.PostSnapchat(URI, parameters);\r\n        }\r\n\r\n        /* \r\n            Register a new user\r\n        */\r\n        public Register(details: Snapchat.RegisterDetails) {\r\n            return new Promise((resolve, reject) => {\r\n                resolve();\r\n            });\r\n        }\r\n\r\n        /*\r\n            Login a user\r\n        */\r\n        public Login(details: Snapchat.LoginDetails) {\r\n            return new Promise((resolve, reject) => {\r\n                this.CurrentUser['username'] = details.username;\r\n                this.CurrentUser['password'] = details.password;\r\n\r\n                let ts = this.SnapchatAgent.GenerateTimeStamp();\r\n                this.SnapchatAgent.LoginSnapchatCasper(ts).then((res: any) => {\r\n                    if (res.code !== 200)\r\n                        return reject(res.message);\r\n\r\n                    resolve(this);\r\n                    //TODO\r\n                }).catch((res) => {\r\n                    return reject(res.message);\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}